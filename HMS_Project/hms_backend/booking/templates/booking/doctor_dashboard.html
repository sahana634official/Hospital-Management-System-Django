{% extends "base.html" %}
{% block content %}

<a href="/connect/doctor-calendar/" class="btn btn-warning mb-3">
  ğŸ”— Connect Doctor Google Calendar
</a>


<div class="row">
  <div class="col-md-5">
    <div class="card shadow p-4 mb-4">
      <h4>ğŸ§‘â€âš•ï¸ Doctor Dashboard</h4>
      <p class="text-muted">Add availability slots</p>

      <form method="POST">
        {% csrf_token %}
        <div class="mb-2">
          <label class="form-label">Date</label>
          <input class="form-control" type="date" name="date" required>
        </div>

        <div class="mb-2">
          <label class="form-label">Start Time</label>
          <input class="form-control" type="time" name="start_time" required>
        </div>

        <div class="mb-3">
          <label class="form-label">End Time</label>
          <input class="form-control" type="time" name="end_time" required>
        </div>

        <button class="btn btn-primary w-100">Add Slot</button>
      </form>
    </div>
  </div>

  <div class="col-md-7">
    <div class="card shadow p-4 mb-4">
      <h5>ğŸ“… Your Slots</h5>
      <ul class="list-group">
        {% for s in slots %}
          <li class="list-group-item d-flex justify-content-between">
            <span>{{ s.date }} | {{ s.start_time }} - {{ s.end_time }}</span>
            {% if s.is_booked %}
              <span class="badge bg-danger">Booked</span>
            {% else %}
              <span class="badge bg-success">Free</span>
            {% endif %}
          </li>
        {% empty %}
          <li class="list-group-item">No slots created yet.</li>
        {% endfor %}
      </ul>
    </div>

    <div class="card shadow p-4">
      <h5>ğŸ“Œ Bookings</h5>
      <ul class="list-group">
        {% for b in bookings %}
          <li class="list-group-item">
            <b>{{ b.patient.user.username }}</b> booked:
            {{ b.slot.date }} {{ b.slot.start_time }} - {{ b.slot.end_time }}
          </li>
        {% empty %}
          <li class="list-group-item">No bookings yet.</li>
        {% endfor %}
      </ul>
    </div>
  </div>
</div>

{% endblock %}
